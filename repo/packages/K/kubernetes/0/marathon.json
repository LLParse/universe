{
  "id": "{{kubernetes.app-id}}",
  "cpus": {{kubernetes.cpus}},
  "mem": {{kubernetes.mem}},
  "container": {
    "type": "DOCKER",
    "docker": {
      "image": "mesosphere/kubernetes:k8s-0.14.2-k8sm-0.5-dcos-dev",
      "forcePullImage": true,
      "network": "HOST"
    }
  },
  "env":{
    "GLOG_v": "{{kubernetes.logging-verbosity}}",
    "DEFAULT_DNS_NAME": "{{kubernetes.app-id}}{{kubernetes.dns-suffix}}",

    {{#kubernetes.mesos-role}}
    "K8SM_MESOS_ROLE": "{{kubernetes.mesos-role}}",
    {{/kubernetes.mesos-role}}

    {{#kubernetes.enable-dns}}
    "ENABLE_DNS": "{{kubernetes.enable-dns}}",
    {{/kubernetes.enable-dns}}

    {{#kubernetes.kube-dns-domain}}
    "DNS_DOMAIN": "{{kubernetes.kube-dns-domain}}",
    {{/kubernetes.kube-dns-domain}}

    {{#kubernetes.kube-dns-service-ip}}
    "DNS_SERVER_IP": "{{kubernetes.kube-dns-service-ip}}",
    {{/kubernetes.kube-dns-service-ip}}

    {{#kubernetes.kube-dns-replicas}}
    "DNS_REPLICAS": "{{kubernetes.kube-dns-replicas}}",
    {{/kubernetes.kube-dns-replicas}}

    {{#kubernetes.kube-dns-nameservers}}
    "DNS_NAMESERVERS": "{{kubernetes.kube-dns-nameservers}}",
    {{/kubernetes.kube-dns-nameservers}}

    {{#kubernetes.portal-net}}
    "PORTAL_NET": "{{kubernetes.portal-net}}",
    {{/kubernetes.portal-net}}

    {{#kubernetes.scheduler-service-ip}}
    "SCHEDULER_SERVICE_ADDRESS": "{{kubernetes.scheduler-service-ip}}",
    {{/kubernetes.scheduler-service-ip}}

    "K8SM_FAILOVER_TIMEOUT": "{{kubernetes.failover-timeout}}",
    "ETCD_SERVER_PORT": "25500",
    "ETCD_SERVER_PEER_PORT": "25501",
    "APISERVER_PORT": "25502",
    "APISERVER_RO_PORT": "25503",
    "SCHEDULER_PORT": "25504",
    "CONTROLLER_MANAGER_PORT": "25505"
  },
  "ports": [25500, 25501, 25502, 25503, 25504, 25505],
  "requirePorts": true,
  "upgradeStrategy":{
    "minimumHealthCapacity": 0,
    "maximumOverCapacity": 0
  },
  "instances": {{kubernetes.instances}},
  "uris": {{kubernetes.uris}},
  "healthChecks": [
    {
      "protocol": "HTTP",
      "path": "/healthz",
      "portIndex": 2,
      "gracePeriodSeconds": 120,
      "intervalSeconds": 60,
      "maxConsecutiveFailures": 2
    }
  ]
}
